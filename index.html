<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>FIL√ìSOFOS</title>

<style>
  body{
    margin:0;
    padding:24px;
    background:#111;
    color:#fff;
    font-family: Arial, Helvetica, sans-serif;
    text-transform: uppercase;
    font-size:18px;
  }
  .wrap{
    max-width:780px;
    margin:auto;
    display:grid;
    gap:18px;
  }
  h1{margin:0;font-size:18px;font-weight:bold;}
  .top{display:flex;align-items:center;gap:10px;}
  .card{
    border:1px solid #333;
    padding:16px;
    display:grid;
    gap:10px;
  }
  h2{margin:0;font-size:18px;font-weight:bold;}
  p{margin:0;font-size:18px;line-height:1.4;}
  button{
    font-size:18px;
    padding:6px 14px;
    cursor:pointer;
    background:#222;
    border:1px solid #444;
    color:#fff;
  }
  button:disabled{opacity:.6;cursor:default;}
  .row{display:flex;gap:8px;flex-wrap:wrap;}

  .word{padding:0 2px;border-radius:4px;}
  .hl{background:#facc15;color:#111;}

  .qbox{
    border-top:1px solid #333;
    padding-top:10px;
    display:grid;
    gap:12px;
  }
  .q{
    display:grid;
    gap:8px;
    padding:10px;
    border:1px solid #333;
  }
  .q.correct{border-color:#22c55e;}
  .q.correct .qtext{color:#22c55e;font-weight:bold;}
  .optrow{display:flex;gap:8px;flex-wrap:wrap;}
  .opt{flex:1 1 220px;text-align:left;}
  .opt.correct{background:#1f7a3a;border-color:#22c55e;}

  .dict-item{
    border:1px solid #333;
    padding:10px;
    display:grid;
    gap:10px;
  }
  textarea{
    width:100%;
    min-height:48px;
    font-size:18px;
    padding:10px;
    background:#0d0d0d;
    border:1px solid #333;
    color:#fff;
    resize:vertical;
    text-transform: uppercase;
  }
</style>
</head>

<body>
<div class="wrap">

  <div class="top">
    <h1 id="titleText">LOS FIL√ìSOFOS</h1>
    <button onclick="speakPlain('FILOSOFOS DE GRECIA')">‚ñ∂</button>
    <button onclick="speakSlowHighlightTemp('FILOSOFOS DE GRECIA')">üê¢</button>
  </div>

  <div class="card">
    <h2 id="name-socrates">S√ìCRATES</h2>
    <p id="txt-socrates">NO DABA RESPUESTAS DIRECTAS. HAC√çA PREGUNTAS SENCILLAS PARA QUE LOS NI√ëOS PENSARAN SOLOS Y DESCUBRIERAN LA RESPUESTA POCO A POCO.</p>

    <div class="row">
      <button onclick="leerNormal('name-socrates','txt-socrates')">‚ñ∂ ESCUCHAR</button>
      <button onclick="leerLento('name-socrates','txt-socrates')">üê¢ LENTO</button>
    </div>

    <div class="qbox">
      <div class="q" data-qid="socrates-1">
        <div class="qtext" id="q-socrates-1">¬øC√ìMO SE LLAMA EL FIL√ìSOFO QUE ACABAS DE ESCUCHAR?</div>
        <div class="row">
          <button onclick="speakFromEl('q-socrates-1')">‚ñ∂</button>
          <button onclick="speakSlowFromEl('q-socrates-1')">üê¢</button>
        </div>
        <div class="optrow">
          <button class="opt" onclick="answer(this,true)">S√ìCRATES</button>
          <button class="opt" onclick="answer(this,false)">PLAT√ìN</button>
        </div>
      </div>

      <div class="q" data-qid="socrates-2">
        <div class="qtext" id="q-socrates-2">¬øENSE√ëABA CON PREGUNTAS?</div>
        <div class="row">
          <button onclick="speakFromEl('q-socrates-2')">‚ñ∂</button>
          <button onclick="speakSlowFromEl('q-socrates-2')">üê¢</button>
        </div>
        <div class="optrow">
          <button class="opt" onclick="answer(this,true)">S√ç</button>
          <button class="opt" onclick="answer(this,false)">NO</button>
        </div>
      </div>

      <div class="q" data-qid="socrates-3">
        <div class="qtext" id="q-socrates-3">¬øDABA RESPUESTAS DIRECTAS?</div>
        <div class="row">
          <button onclick="speakFromEl('q-socrates-3')">‚ñ∂</button>
          <button onclick="speakSlowFromEl('q-socrates-3')">üê¢</button>
        </div>
        <div class="optrow">
          <button class="opt" onclick="answer(this,false)">S√ç</button>
          <button class="opt" onclick="answer(this,true)">NO</button>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <h2 id="name-platon">PLAT√ìN</h2>
    <p id="txt-platon">EXPLICABA LAS IDEAS CON HISTORIAS, DIBUJOS Y EJEMPLOS. LE GUSTABA ENSE√ëAR COMO SI CONTARA UN CUENTO PARA ENTENDER MEJOR EL MUNDO.</p>

    <div class="row">
      <button onclick="leerNormal('name-platon','txt-platon')">‚ñ∂ ESCUCHAR</button>
      <button onclick="leerLento('name-platon','txt-platon')">üê¢ LENTO</button>
    </div>

    <div class="qbox">
      <div class="q" data-qid="platon-1">
        <div class="qtext" id="q-platon-1">¬øC√ìMO SE LLAMA EL FIL√ìSOFO QUE ACABAS DE ESCUCHAR?</div>
        <div class="row">
          <button onclick="speakFromEl('q-platon-1')">‚ñ∂</button>
          <button onclick="speakSlowFromEl('q-platon-1')">üê¢</button>
        </div>
        <div class="optrow">
          <button class="opt" onclick="answer(this,true)">PLAT√ìN</button>
          <button class="opt" onclick="answer(this,false)">ARIST√ìTELES</button>
        </div>
      </div>

      <div class="q" data-qid="platon-2">
        <div class="qtext" id="q-platon-2">¬øENSE√ëABA CON HISTORIAS?</div>
        <div class="row">
          <button onclick="speakFromEl('q-platon-2')">‚ñ∂</button>
          <button onclick="speakSlowFromEl('q-platon-2')">üê¢</button>
        </div>
        <div class="optrow">
          <button class="opt" onclick="answer(this,true)">S√ç</button>
          <button class="opt" onclick="answer(this,false)">NO</button>
        </div>
      </div>

      <div class="q" data-qid="platon-3">
        <div class="qtext" id="q-platon-3">¬øUSABA DIBUJOS Y EJEMPLOS?</div>
        <div class="row">
          <button onclick="speakFromEl('q-platon-3')">‚ñ∂</button>
          <button onclick="speakSlowFromEl('q-platon-3')">üê¢</button>
        </div>
        <div class="optrow">
          <button class="opt" onclick="answer(this,true)">S√ç</button>
          <button class="opt" onclick="answer(this,false)">NO</button>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <h2 id="name-aristoteles">ARIST√ìTELES</h2>
    <p id="txt-aristoteles">APREND√çA MIRANDO LA REALIDAD. OBSERVABA LA NATURALEZA Y LO QUE PASA CADA D√çA PARA ENTENDER C√ìMO FUNCIONAN LAS COSAS.</p>

    <div class="row">
      <button onclick="leerNormal('name-aristoteles','txt-aristoteles')">‚ñ∂ ESCUCHAR</button>
      <button onclick="leerLento('name-aristoteles','txt-aristoteles')">üê¢ LENTO</button>
    </div>

    <div class="qbox">
      <div class="q" data-qid="aristoteles-1">
        <div class="qtext" id="q-aristoteles-1">¬øC√ìMO SE LLAMA EL FIL√ìSOFO QUE ACABAS DE ESCUCHAR?</div>
        <div class="row">
          <button onclick="speakFromEl('q-aristoteles-1')">‚ñ∂</button>
          <button onclick="speakSlowFromEl('q-aristoteles-1')">üê¢</button>
        </div>
        <div class="optrow">
          <button class="opt" onclick="answer(this,true)">ARIST√ìTELES</button>
          <button class="opt" onclick="answer(this,false)">S√ìCRATES</button>
        </div>
      </div>

      <div class="q" data-qid="aristoteles-2">
        <div class="qtext" id="q-aristoteles-2">¬øOBSERVABA LA NATURALEZA?</div>
        <div class="row">
          <button onclick="speakFromEl('q-aristoteles-2')">‚ñ∂</button>
          <button onclick="speakSlowFromEl('q-aristoteles-2')">üê¢</button>
        </div>
        <div class="optrow">
          <button class="opt" onclick="answer(this,true)">S√ç</button>
          <button class="opt" onclick="answer(this,false)">NO</button>
        </div>
      </div>

      <div class="q" data-qid="aristoteles-3">
        <div class="qtext" id="q-aristoteles-3">¬øAPREND√çA MIRANDO LA REALIDAD?</div>
        <div class="row">
          <button onclick="speakFromEl('q-aristoteles-3')">‚ñ∂</button>
          <button onclick="speakSlowFromEl('q-aristoteles-3')">üê¢</button>
        </div>
        <div class="optrow">
          <button class="opt" onclick="answer(this,true)">S√ç</button>
          <button class="opt" onclick="answer(this,false)">NO</button>
        </div>
      </div>
    </div>
  </div>

  <div class="card">
    <h2>DICTADO</h2>

    <p id="dict-instr">AHORA VAS A ESCUCHAR PALABRAS TRES VECES. T√ö SOLO TIENES QUE COPIAR CADA PALABRA UNA VEZ.</p>
    <div class="row">
      <button onclick="speakFromEl('dict-instr')">‚ñ∂</button>
      <button onclick="speakSlowFromEl('dict-instr')">üê¢</button>
    </div>

    <div class="dict-item">
      <p id="d1">GRECIA</p>
      <div class="row">
        <button onclick="dictateFromEl('d1', false)">‚ñ∂</button>
        <button onclick="dictateFromEl('d1', true)">üê¢</button>
      </div>
      <textarea placeholder="ESCRIBE AQU√ç..."></textarea>
    </div>

    <div class="dict-item">
      <p id="d2">ENSE√ëABA CON HISTORIAS</p>
      <div class="row">
        <button onclick="dictateFromEl('d2', false)">‚ñ∂</button>
        <button onclick="dictateFromEl('d2', true)">üê¢</button>
      </div>
      <textarea placeholder="ESCRIBE AQU√ç..."></textarea>
    </div>

    <div class="dict-item">
      <p id="d3">OBSERVAR LA NATURALEZA</p>
      <div class="row">
        <button onclick="dictateFromEl('d3', false)">‚ñ∂</button>
        <button onclick="dictateFromEl('d3', true)">üê¢</button>
      </div>
      <textarea placeholder="ESCRIBE AQU√ç..."></textarea>
    </div>
  </div>

</div>

<script>
const synth = window.speechSynthesis;

function vozES(){
  const vs = synth.getVoices() || [];
  return vs.find(v => (v.lang||"").toLowerCase().startsWith("es-es"))
      || vs.find(v => (v.lang||"").toLowerCase().startsWith("es"))
      || null;
}

function speakTextForVoice(displayText){
  return (displayText || "").toLowerCase();
}

function prepare(el){
  if(el.dataset.ready === "1") return;
  const raw = el.innerText;
  el.dataset.raw = raw;

  const tokens = raw.split(/(\s+)/);
  el.innerHTML = "";
  el._words = [];

  tokens.forEach(t=>{
    if(t === "") return;
    if(/^\s+$/.test(t)){
      el.appendChild(document.createTextNode(t));
    }else{
      const s = document.createElement("span");
      s.className = "word";
      s.textContent = t;
      el.appendChild(s);
      el._words.push(s);
    }
  });

  el.dataset.ready = "1";
}

function clearHL(el){
  if(!el || !el._words) return;
  el._words.forEach(w=>w.classList.remove("hl"));
}

function speakPlain(text){
  synth.cancel();
  const v = vozES();
  const u = new SpeechSynthesisUtterance(speakTextForVoice(text));
  if(v) u.voice = v;
  u.lang = "es-ES";
  u.rate = 0.95;
  u.pitch = 1.02;
  synth.speak(u);
}

function speakFromEl(elId){
  const el = document.getElementById(elId);
  if(!el) return;
  speakPlain(el.innerText);
}

function speakSlowHighlightEl(el, opts = {}){
  synth.cancel();
  const v = vozES();
  prepare(el);
  clearHL(el);

  const words = el._words.map(w => w.innerText);
  let i = 0;

  function next(){
    if(i >= words.length){
      clearHL(el);
      return;
    }
    clearHL(el);
    el._words[i].classList.add("hl");

    const u = new SpeechSynthesisUtterance(speakTextForVoice(words[i]));
    if(v) u.voice = v;
    u.lang = "es-ES";
    u.rate = opts.rate ?? 0.75;
    u.pitch = opts.pitch ?? 1.02;

    u.onend = () => {
      i++;
      setTimeout(next, opts.pause ?? 250);
    };
    synth.speak(u);
  }

  next();
}

function speakSlowFromEl(elId){
  const el = document.getElementById(elId);
  if(!el) return;
  speakSlowHighlightEl(el);
}

function speakSlowHighlightTemp(text){
  const tmp = document.createElement("div");
  tmp.style.position = "absolute";
  tmp.style.left = "-9999px";
  tmp.style.top = "-9999px";
  tmp.innerText = text;
  document.body.appendChild(tmp);
  speakSlowHighlightEl(tmp);
  setTimeout(()=>tmp.remove(), 5000);
}

function leerNormal(idNombre, idTexto){
  synth.cancel();
  const v = vozES();

  const nombre = document.getElementById(idNombre).innerText;
  const texto  = document.getElementById(idTexto).innerText;

  const u1 = new SpeechSynthesisUtterance(speakTextForVoice(nombre));
  if(v) u1.voice = v;
  u1.lang = "es-ES";
  u1.rate = 0.95;
  u1.pitch = 1.02;

  const u2 = new SpeechSynthesisUtterance(speakTextForVoice(texto));
  if(v) u2.voice = v;
  u2.lang = "es-ES";
  u2.rate = 0.95;
  u2.pitch = 1.02;

  synth.speak(u1);
  synth.speak(u2);
}

function leerLento(idNombre, idTexto){
  synth.cancel();
  const v = vozES();

  const nameEl = document.getElementById(idNombre);
  const textEl = document.getElementById(idTexto);

  const u1 = new SpeechSynthesisUtterance(speakTextForVoice(nameEl.innerText));
  if(v) u1.voice = v;
  u1.lang = "es-ES";
  u1.rate = 0.9;
  u1.pitch = 1.02;

  synth.speak(u1);
  u1.onend = () => setTimeout(()=> speakSlowHighlightEl(textEl, {rate:0.75, pause:250}), 350);
}

function answer(btn, isCorrect){
  const q = btn.closest(".q");
  if(!q || q.classList.contains("correct")) return;

  if(isCorrect){
    q.classList.add("correct");
    btn.classList.add("correct");
    q.querySelectorAll(".opt").forEach(b => b.disabled = true);
  }
}

function dictateFromEl(elId, slow){
  const el = document.getElementById(elId);
  if(!el) return;

  const text = el.innerText;
  synth.cancel();
  const v = vozES();

  if(!slow){
    let count = 0;
    function say(){
      if(count >= 3) return;
      const u = new SpeechSynthesisUtterance(speakTextForVoice(text));
      if(v) u.voice = v;
      u.lang = "es-ES";
      u.rate = 0.95;
      u.pitch = 1.02;
      u.onend = () => { count++; setTimeout(say, 450); };
      synth.speak(u);
    }
    say();
  }else{
    let round = 0;
    const words = text.split(/\s+/).filter(Boolean);
    function speakRound(){
      if(round >= 3) return;
      let i = 0;
      function nextWord(){
        if(i >= words.length){
          round++;
          setTimeout(speakRound, 500);
          return;
        }
        const u = new SpeechSynthesisUtterance(speakTextForVoice(words[i]));
        if(v) u.voice = v;
        u.lang = "es-ES";
        u.rate = 0.75;
        u.pitch = 1.02;
        u.onend = () => { i++; setTimeout(nextWord, 220); };
        synth.speak(u);
      }
      nextWord();
    }
    speakRound();
  }
}
</script>
</body>
</html>
